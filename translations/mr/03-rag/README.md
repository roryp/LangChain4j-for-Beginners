<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "f538a51cfd13147d40d84e936a0f485c",
  "translation_date": "2025-12-13T16:55:13+00:00",
  "source_file": "03-rag/README.md",
  "language_code": "mr"
}
-->
# Module 03: RAG (Retrieval-Augmented Generation)

## Table of Contents

- [What You'll Learn](../../../03-rag)
- [Prerequisites](../../../03-rag)
- [Understanding RAG](../../../03-rag)
- [How It Works](../../../03-rag)
  - [Document Processing](../../../03-rag)
  - [Creating Embeddings](../../../03-rag)
  - [Semantic Search](../../../03-rag)
  - [Answer Generation](../../../03-rag)
- [Run the Application](../../../03-rag)
- [Using the Application](../../../03-rag)
  - [Upload a Document](../../../03-rag)
  - [Ask Questions](../../../03-rag)
  - [Check Source References](../../../03-rag)
  - [Experiment with Questions](../../../03-rag)
- [Key Concepts](../../../03-rag)
  - [Chunking Strategy](../../../03-rag)
  - [Similarity Scores](../../../03-rag)
  - [In-Memory Storage](../../../03-rag)
  - [Context Window Management](../../../03-rag)
- [When RAG Matters](../../../03-rag)
- [Next Steps](../../../03-rag)

## What You'll Learn

рдорд╛рдЧреАрд▓ рдореЙрдбреНрдпреВрд▓рдордзреНрдпреЗ, рддреБрдореНрд╣реА AI рд╕реЛрдмрдд рд╕рдВрд╡рд╛рдж рдХрд╕рд╛ рдХрд░рд╛рдпрдЪрд╛ рдЖрдгрд┐ рддреБрдордЪреЗ рдкреНрд░реЙрдореНрдкреНрдЯ рдкреНрд░рднрд╛рд╡реАрдкрдгреЗ рдХрд╕реЗ рд░рдЪрд╛рдпрдЪреЗ рд╣реЗ рд╢рд┐рдХрд▓рд╛рдд. рдкрдг рдПрдХ рдореВрд▓рднреВрдд рдорд░реНрдпрд╛рджрд╛ рдЖрд╣реЗ: рднрд╛рд╖рд╛ рдореЙрдбреЗрд▓реНрд╕рдирд╛ рдлрдХреНрдд рддреЗрдЪ рдорд╛рд╣рд┐рддреА рдЕрд╕рддреЗ рдЬреА рддреНрдпрд╛рдВрдиреА рдкреНрд░рд╢рд┐рдХреНрд╖рдгрд╛рджрд░рдореНрдпрд╛рди рд╢рд┐рдХрд▓реА рдЖрд╣реЗ. рддреЗ рддреБрдордЪреНрдпрд╛ рдХрдВрдкрдиреАрдЪреНрдпрд╛ рдзреЛрд░рдгрд╛рдВрдмрджреНрджрд▓, рддреБрдордЪреНрдпрд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рджрд╕реНрддрдРрд╡рдЬрд╛рдВрдмрджреНрджрд▓ рдХрд┐рдВрд╡рд╛ рдЬреНрдпрд╛рд╡рд░ рддреНрдпрд╛рдВрдирд╛ рдкреНрд░рд╢рд┐рдХреНрд╖рдг рджрд┐рд▓реЗ рдЧреЗрд▓реЗ рдирд╛рд╣реА рдЕрд╢рд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА рдорд╛рд╣рд┐рддреАрдмрджреНрджрд▓ рдкреНрд░рд╢реНрдирд╛рдВрдЪреА рдЙрддреНрддрд░реЗ рджреЗрдК рд╢рдХрдд рдирд╛рд╣реАрдд.

RAG (Retrieval-Augmented Generation) рд╣рд╛ рд╣рд╛ рдкреНрд░рд╢реНрди рд╕реЛрдбрд╡рддреЛ. рдореЙрдбреЗрд▓рд▓рд╛ рддреБрдордЪреА рдорд╛рд╣рд┐рддреА рд╢рд┐рдХрд╡рдгреНрдпрд╛рдЪрд╛ рдкреНрд░рдпрддреНрди рдХрд░рдгреНрдпрд╛рдРрд╡рдЬреА (рдЬреЛ рдорд╣рд╛рдЧ рдЖрдгрд┐ рдЕрд╡реНрдпрд╡рд╣рд╛рд░реНрдп рдЖрд╣реЗ), рддреБрдореНрд╣реА рддреНрдпрд╛рд▓рд╛ рддреБрдордЪреНрдпрд╛ рджрд╕реНрддрдРрд╡рдЬрд╛рдВрдордзреВрди рд╢реЛрдз рдШреЗрдгреНрдпрд╛рдЪреА рдХреНрд╖рдорддрд╛ рджреЗрддрд╛. рдЬреЗрд╡реНрд╣рд╛ рдХреЛрдгреА рдкреНрд░рд╢реНрди рд╡рд┐рдЪрд╛рд░рддреЛ, рддреЗрд╡реНрд╣рд╛ рд╕рд┐рд╕реНрдЯрдо рд╕рдВрдмрдВрдзрд┐рдд рдорд╛рд╣рд┐рддреА рд╢реЛрдзрддреЗ рдЖрдгрд┐ рддреА рдкреНрд░реЙрдореНрдкреНрдЯрдордзреНрдпреЗ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░рддреЗ. рдореЙрдбреЗрд▓ рдирдВрддрд░ рддреНрдпрд╛ рдкреНрд░рд╛рдкреНрдд рд╕рдВрджрд░реНрднрд╛рд╡рд░ рдЖрдзрд╛рд░рд┐рдд рдЙрддреНрддрд░ рджреЗрддреЗ.

RAG рд▓рд╛ рдореЙрдбреЗрд▓рд▓рд╛ рд╕рдВрджрд░реНрдн рдЧреНрд░рдВрдерд╛рд▓рдп рджреЗрдгреНрдпрд╛рд╕рд╛рд░рдЦреЗ рд╕рдордЬрд╛. рдЬреЗрд╡реНрд╣рд╛ рддреБрдореНрд╣реА рдкреНрд░рд╢реНрди рд╡рд┐рдЪрд╛рд░рддрд╛, рддреЗрд╡реНрд╣рд╛ рд╕рд┐рд╕реНрдЯрдо:

1. **User Query** - рддреБрдореНрд╣реА рдкреНрд░рд╢реНрди рд╡рд┐рдЪрд╛рд░рддрд╛
2. **Embedding** - рддреБрдордЪрд╛ рдкреНрд░рд╢реНрди рд╡реНрд╣реЗрдХреНрдЯрд░рдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рддреЛ
3. **Vector Search** - рд╕рдорд╛рди рджрд╕реНрддрдРрд╡рдЬ рдЪрдВрдХ рд╢реЛрдзрддреЛ
4. **Context Assembly** - рд╕рдВрдмрдВрдзрд┐рдд рдЪрдВрдХ рдкреНрд░реЙрдореНрдкреНрдЯрдордзреНрдпреЗ рдЬреЛрдбрддреЛ
5. **Response** - LLM рд╕рдВрджрд░реНрднрд╛рд╡рд░ рдЖрдзрд╛рд░рд┐рдд рдЙрддреНрддрд░ рддрдпрд╛рд░ рдХрд░рддреЛ

рд╣реЗ рдореЙрдбреЗрд▓рдЪреНрдпрд╛ рдкреНрд░рддрд┐рд╕рд╛рджрд╛рдВрдирд╛ рддреНрдпрд╛рдЪреНрдпрд╛ рдкреНрд░рд╢рд┐рдХреНрд╖рдг рдЬреНрдЮрд╛рдирд╛рд╡рд░ рдЕрд╡рд▓рдВрдмреВрди рди рд░рд╛рд╣рддрд╛ рддреБрдордЪреНрдпрд╛ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдбреЗрдЯрд╛рд╡рд░ рдЖрдзрд╛рд░рд┐рдд рдХрд░рддреЗ.

<img src="../../../translated_images/rag-architecture.ccb53b71a6ce407fa8a6394c7a747eb9ad40f6334b4c217be0439d700f22bbcc.mr.png" alt="RAG Architecture" width="800"/>

*RAG рдХрд╛рд░реНрдпрдкреНрд░рд╡рд╛рд╣ - рд╡рд╛рдкрд░рдХрд░реНрддреНрдпрд╛рдЪреНрдпрд╛ рдкреНрд░рд╢реНрдирд╛рдкрд╛рд╕реВрди рд╕реЗрдореЕрдВрдЯрд┐рдХ рд╢реЛрдз рдЖрдгрд┐ рд╕рдВрджрд░реНрднрд╛рддреНрдордХ рдЙрддреНрддрд░ рдирд┐рд░реНрдорд┐рддреАрдкрд░реНрдпрдВрдд*

## Prerequisites

- рдкреВрд░реНрдг рдХреЗрд▓реЗрд▓реЗ Module 01 (Azure OpenAI рд╕рдВрд╕рд╛рдзрдиреЗ рддреИрдирд╛рдд рдХреЗрд▓реА рдЖрд╣реЗрдд)
- рд░реВрдЯ рдбрд┐рд░реЗрдХреНрдЯрд░реАрдордзреНрдпреЗ `.env` рдлрд╛рдЗрд▓ Azure рдХреНрд░реЗрдбреЗрдиреНрд╢рд┐рдпрд▓реНрд╕рд╕рд╣ (Module 01 рдордзреНрдпреЗ `azd up` рдиреЗ рддрдпрд╛рд░ рдХреЗрд▓реЗрд▓реА)

> **Note:** рдЬрд░ рддреБрдореНрд╣реА Module 01 рдкреВрд░реНрдг рдХреЗрд▓реЗ рдирд╕реЗрд▓, рддрд░ рдкреНрд░рдердо рддрд┐рдерд▓реНрдпрд╛ рддреИрдирд╛рддреАрдЪреНрдпрд╛ рд╕реВрдЪрдирд╛ рдкрд╛рд│рд╛.

## How It Works

**Document Processing** - [DocumentService.java](../../../03-rag/src/main/java/com/example/langchain4j/rag/service/DocumentService.java)

рдЬреЗрд╡реНрд╣рд╛ рддреБрдореНрд╣реА рджрд╕реНрддрдРрд╡рдЬ рдЕрдкрд▓реЛрдб рдХрд░рддрд╛, рддреЗрд╡реНрд╣рд╛ рд╕рд┐рд╕реНрдЯрдо рддреНрдпрд╛рд▓рд╛ рдЪрдВрдХрдордзреНрдпреЗ рд╡рд┐рднрд╛рдЧрддреЗ - рдЫреЛрдЯреЗ рддреБрдХрдбреЗ рдЬреЗ рдореЙрдбреЗрд▓рдЪреНрдпрд╛ рд╕рдВрджрд░реНрдн рд╡рд┐рдВрдбреЛрдордзреНрдпреЗ рдЖрд░рд╛рдорд╛рдд рдмрд╕рддрд╛рдд. рд╣реЗ рдЪрдВрдХ рдереЛрдбреЗрд╕реЗ рдУрд╡реНрд╣рд░рд▓реЕрдк рдХрд░рддрд╛рдд рдЬреЗрдгреЗрдХрд░реВрди рд╕реАрдорд╛рдВрд╡рд░ рд╕рдВрджрд░реНрдн рдЧрдорд╛рд╡рд▓рд╛ рдЬрд╛рдд рдирд╛рд╣реА.

```java
Document document = FileSystemDocumentLoader.loadDocument("sample-document.txt");

DocumentSplitter splitter = DocumentSplitters
    .recursive(300, 30, new OpenAiTokenizer());

List<TextSegment> segments = splitter.split(document);
```

> **ЁЯдЦ Try with [GitHub Copilot](https://github.com/features/copilot) Chat:** Open [`DocumentService.java`](../../../03-rag/src/main/java/com/example/langchain4j/rag/service/DocumentService.java) and ask:
> - "How does LangChain4j split documents into chunks and why is overlap important?"
> - "What's the optimal chunk size for different document types and why?"
> - "How do I handle documents in multiple languages or with special formatting?"

**Creating Embeddings** - [LangChainRagConfig.java](../../../03-rag/src/main/java/com/example/langchain4j/rag/config/LangChainRagConfig.java)

рдкреНрд░рддреНрдпреЗрдХ рдЪрдВрдХрд▓рд╛ рд╕рдВрдЦреНрдпрд╛рддреНрдордХ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡рд╛рдд рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХреЗрд▓реЗ рдЬрд╛рддреЗ рдЬреНрдпрд╛рд▓рд╛ рдПрдореНрдмреЗрдбрд┐рдВрдЧ рдореНрд╣рдгрддрд╛рдд - рдореВрд▓рддрдГ рдПрдХ рдЧрдгрд┐рддреАрдп рдлрд┐рдВрдЧрд░рдкреНрд░рд┐рдВрдЯ рдЬреЛ рдордЬрдХреБрд░рд╛рдЪрд╛ рдЕрд░реНрде рдкрдХрдбрддреЛ. рд╕рдорд╛рди рдордЬрдХреВрд░ рд╕рдорд╛рди рдПрдореНрдмреЗрдбрд┐рдВрдЧ рддрдпрд╛рд░ рдХрд░рддреЛ.

```java
@Bean
public EmbeddingModel embeddingModel() {
    return OpenAiOfficialEmbeddingModel.builder()
        .baseUrl(azureOpenAiEndpoint)
        .apiKey(azureOpenAiKey)
        .modelName(azureEmbeddingDeploymentName)
        .build();
}

EmbeddingStore<TextSegment> embeddingStore = 
    new InMemoryEmbeddingStore<>();
```

<img src="../../../translated_images/vector-embeddings.2ef7bdddac79a327ad9e3e46cde9a86f5eeefbeb3edccd387e33018c1671cecd.mr.png" alt="Vector Embeddings Space" width="800"/>

*рджрд╕реНрддрдРрд╡рдЬ рдПрдореНрдмреЗрдбрд┐рдВрдЧ рд╕реНрдкреЗрд╕рдордзреАрд▓ рд╡реНрд╣реЗрдХреНрдЯрд░ рдореНрд╣рдгреВрди рд╕рд╛рджрд░ - рд╕рдорд╛рди рд╕рд╛рдордЧреНрд░реА рдПрдХрддреНрд░ рдХреНрд▓рд╕реНрдЯрд░ рд╣реЛрддреЗ*

**Semantic Search** - [RagService.java](../../../03-rag/src/main/java/com/example/langchain4j/rag/service/RagService.java)

рдЬреЗрд╡реНрд╣рд╛ рддреБрдореНрд╣реА рдкреНрд░рд╢реНрди рд╡рд┐рдЪрд╛рд░рддрд╛, рддреБрдордЪрд╛ рдкреНрд░рд╢реНрди рджреЗрдЦреАрд▓ рдПрдореНрдмреЗрдбрд┐рдВрдЧрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рд╣реЛрддреЛ. рд╕рд┐рд╕реНрдЯрдо рддреБрдордЪреНрдпрд╛ рдкреНрд░рд╢реНрдирд╛рдЪреНрдпрд╛ рдПрдореНрдмреЗрдбрд┐рдВрдЧрдЪреА рддреБрд▓рдирд╛ рд╕рд░реНрд╡ рджрд╕реНрддрдРрд╡рдЬ рдЪрдВрдХрдЪреНрдпрд╛ рдПрдореНрдмреЗрдбрд┐рдВрдЧрд╢реА рдХрд░рддреЗ. рддреЗ рд╕рд░реНрд╡рд╛рдд рд╕рдорд╛рди рдЕрд░реНрде рдЕрд╕рд▓реЗрд▓реЗ рдЪрдВрдХ рд╢реЛрдзрддрд╛рдд - рдлрдХреНрдд рдХреАрд╡рд░реНрдб рдЬреБрд│рдгреНрдпрд╛рдкреЗрдХреНрд╖рд╛, рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕реЗрдореЕрдВрдЯрд┐рдХ рд╕рдорд╛рдирддрд╛.

```java
Embedding queryEmbedding = embeddingModel.embed(question).content();

List<EmbeddingMatch<TextSegment>> matches = 
    embeddingStore.findRelevant(queryEmbedding, 5, 0.7);

for (EmbeddingMatch<TextSegment> match : matches) {
    String relevantText = match.embedded().text();
    double score = match.score();
}
```

> **ЁЯдЦ Try with [GitHub Copilot](https://github.com/features/copilot) Chat:** Open [`RagService.java`](../../../03-rag/src/main/java/com/example/langchain4j/rag/service/RagService.java) and ask:
> - "How does similarity search work with embeddings and what determines the score?"
> - "What similarity threshold should I use and how does it affect results?"
> - "How do I handle cases where no relevant documents are found?"

**Answer Generation** - [RagService.java](../../../03-rag/src/main/java/com/example/langchain4j/rag/service/RagService.java)

рд╕рд░реНрд╡рд╛рдд рд╕рдВрдмрдВрдзрд┐рдд рдЪрдВрдХ рдкреНрд░реЙрдореНрдкреНрдЯрдордзреНрдпреЗ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХреЗрд▓реЗ рдЬрд╛рддрд╛рдд. рдореЙрдбреЗрд▓ рддреНрдпрд╛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЪрдВрдХ рд╡рд╛рдЪрддреЗ рдЖрдгрд┐ рддреНрдпрд╛ рдорд╛рд╣рд┐рддреАрд╡рд░ рдЖрдзрд╛рд░рд┐рдд рддреБрдордЪреНрдпрд╛ рдкреНрд░рд╢реНрдирд╛рдЪреЗ рдЙрддреНрддрд░ рджреЗрддреЗ. рдпрд╛рдореБрд│реЗ рднреНрд░рдо рдирд┐рд░реНрдорд╛рдг рд╣реЛрдгреНрдпрд╛рдкрд╛рд╕реВрди рдкреНрд░рддрд┐рдмрдВрдз рд╣реЛрддреЛ - рдореЙрдбреЗрд▓ рдлрдХреНрдд рд╕рдореЛрд░ рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рдорд╛рд╣рд┐рддреАрд╡рд░реВрдирдЪ рдЙрддреНрддрд░ рджреЗрдК рд╢рдХрддреЗ.

## Run the Application

**Verify deployment:**

рд░реВрдЯ рдбрд┐рд░реЗрдХреНрдЯрд░реАрдордзреНрдпреЗ `.env` рдлрд╛рдЗрд▓ Azure рдХреНрд░реЗрдбреЗрдиреНрд╢рд┐рдпрд▓реНрд╕рд╕рд╣ рдЕрд╕реНрддрд┐рддреНрд╡рд╛рдд рдЖрд╣реЗ рдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рд╛ (Module 01 рджрд░рдореНрдпрд╛рди рддрдпрд╛рд░ рдХреЗрд▓реЗрд▓реА):
```bash
cat ../.env  # AZURE_OPENAI_ENDPOINT, API_KEY, DEPLOYMENT рджрд╛рдЦрд╡рд▓реЗ рдкрд╛рд╣рд┐рдЬреЗ
```

**Start the application:**

> **Note:** рдЬрд░ рддреБрдореНрд╣реА рдЖрдзреАрдЪ Module 01 рдордзреАрд▓ `./start-all.sh` рд╡рд╛рдкрд░реВрди рд╕рд░реНрд╡ рдЕтАНреЕрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рд╕реБрд░реВ рдХреЗрд▓реЗ рдЕрд╕рддреАрд▓, рддрд░ рд╣рд╛ рдореЙрдбреНрдпреВрд▓ рдкреЛрд░реНрдЯ 8081 рд╡рд░ рдЖрдзреАрдЪ рдЪрд╛рд▓реВ рдЖрд╣реЗ. рддреБрдореНрд╣реА рдЦрд╛рд▓реАрд▓ рд╕реБрд░реВ рдХрд░рдгреНрдпрд╛рдЪреНрдпрд╛ рдЖрджреЗрд╢рд╛рдВрдирд╛ рд╡рдЧрд│реВ рд╢рдХрддрд╛ рдЖрдгрд┐ рдереЗрдЯ http://localhost:8081 рд╡рд░ рдЬрд╛рдК рд╢рдХрддрд╛.

**Option 1: Using Spring Boot Dashboard (Recommended for VS Code users)**

рдбреЗрд╡реНрд╣ рдХрдВрдЯреЗрдирд░рдордзреНрдпреЗ Spring Boot Dashboard рд╡рд┐рд╕реНрддрд╛рд░ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдЖрд╣реЗ, рдЬреЛ рд╕рд░реНрд╡ Spring Boot рдЕтАНреЕрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рджреГрд╢реНрдпрд╛рддреНрдордХ рдЗрдВрдЯрд░рдлреЗрд╕ рдкреНрд░рджрд╛рди рдХрд░рддреЛ. рддреБрдореНрд╣рд╛рд▓рд╛ VS Code рдЪреНрдпрд╛ рдбрд╛рд╡реНрдпрд╛ рдмрд╛рдЬреВрд▓рд╛ Activity Bar рдордзреНрдпреЗ (Spring Boot рдЖрдпрдХреЙрди рд╢реЛрдзрд╛) рддреЗ рд╕рд╛рдкрдбреЗрд▓.

Spring Boot Dashboard рдордзреВрди, рддреБрдореНрд╣реА:
- рд╡рд░реНрдХрд╕реНрдкреЗрд╕рдордзреАрд▓ рд╕рд░реНрд╡ рдЙрдкрд▓рдмреНрдз Spring Boot рдЕтАНреЕрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдкрд╛рд╣реВ рд╢рдХрддрд╛
- рдПрдХ рдХреНрд▓рд┐рдХрдиреЗ рдЕтАНреЕрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рд╕реБрд░реВ/рдерд╛рдВрдмрд╡реВ рд╢рдХрддрд╛
- рдЕтАНреЕрдкреНрд▓рд┐рдХреЗрд╢рди рд▓реЙрдЧреНрд╕ рд░рд┐рдЕрд▓-рдЯрд╛рдЗрдордордзреНрдпреЗ рдкрд╛рд╣реВ рд╢рдХрддрд╛
- рдЕтАНреЕрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реНрдерд┐рддреА рдирд┐рд░реАрдХреНрд╖рдг рдХрд░реВ рд╢рдХрддрд╛

"rag" рдЪреНрдпрд╛ рдмрд╛рдЬреВрд▓рд╛ рдкреНрд▓реЗ рдмрдЯрдгрд╛рд╡рд░ рдХреНрд▓рд┐рдХ рдХрд░рд╛ рд╣рд╛ рдореЙрдбреНрдпреВрд▓ рд╕реБрд░реВ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА, рдХрд┐рдВрд╡рд╛ рд╕рд░реНрд╡ рдореЙрдбреНрдпреВрд▓ рдПрдХрддреНрд░ рд╕реБрд░реВ рдХрд░рд╛.

<img src="../../../translated_images/dashboard.fbe6e28bf4267ffe4f95a708ecd46e78f69fd46a562d2a766e73c98fe0f53922.mr.png" alt="Spring Boot Dashboard" width="400"/>

**Option 2: Using shell scripts**

рд╕рд░реНрд╡ рд╡реЗрдм рдЕтАНреЕрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ (рдореЙрдбреНрдпреВрд▓ 01-04) рд╕реБрд░реВ рдХрд░рд╛:

**Bash:**
```bash
cd ..  # рдореВрд│ рдирд┐рд░реНрджреЗрд╢рд┐рдХреЗрддреВрди
./start-all.sh
```

**PowerShell:**
```powershell
cd ..  # рдореВрд│ рдирд┐рд░реНрджреЗрд╢рд┐рдХреЗрддреВрди
.\start-all.ps1
```

рдХрд┐рдВрд╡рд╛ рдлрдХреНрдд рд╣рд╛ рдореЙрдбреНрдпреВрд▓ рд╕реБрд░реВ рдХрд░рд╛:

**Bash:**
```bash
cd 03-rag
./start.sh
```

**PowerShell:**
```powershell
cd 03-rag
.\start.ps1
```

рджреЛрдиреНрд╣реА рд╕реНрдХреНрд░рд┐рдкреНрдЯреНрд╕ рд░реВрдЯ `.env` рдлрд╛рдЗрд▓рдордзреВрди рдкрд░реНрдпрд╛рд╡рд░рдгреАрдп рдЪрд▓ рд╕реНрд╡рдпрдВрдЪрд▓рд┐рддрдкрдгреЗ рд▓реЛрдб рдХрд░рддрд╛рдд рдЖрдгрд┐ рдЬрд░ JAR рдЕрд╕реНрддрд┐рддреНрд╡рд╛рдд рдирд╕рддреАрд▓ рддрд░ рддрдпрд╛рд░ рдХрд░рддреАрд▓.

> **Note:** рдЬрд░ рддреБрдореНрд╣рд╛рд▓рд╛ рд╕рд░реНрд╡ рдореЙрдбреНрдпреВрд▓реНрд╕ рдореЕрдиреНрдпреБрдЕрд▓реА рддрдпрд╛рд░ рдХрд░рд╛рдпрдЪреЗ рдЕрд╕рддреАрд▓ рд╕реБрд░реВ рдХрд░рдгреНрдпрд╛рдкреВрд░реНрд╡реА:
>
> **Bash:**
> ```bash
> cd ..  # Go to root directory
> mvn clean package -DskipTests
> ```
>
> **PowerShell:**
> ```powershell
> cd ..  # Go to root directory
> mvn clean package -DskipTests
> ```

рддреБрдордЪреНрдпрд╛ рдмреНрд░рд╛рдЙрдЭрд░рдордзреНрдпреЗ http://localhost:8081 рдЙрдШрдбрд╛.

**To stop:**

**Bash:**
```bash
./stop.sh  # рд╣рд╛ рдлрдХреНрдд рдореЙрдбреНрдпреВрд▓ рдЖрд╣реЗ
# рдХрд┐рдВрд╡рд╛
cd .. && ./stop-all.sh  # рд╕рд░реНрд╡ рдореЙрдбреНрдпреВрд▓реНрд╕
```

**PowerShell:**
```powershell
.\stop.ps1  # рд╣рд╛ рдлрдХреНрдд рдореЙрдбреНрдпреВрд▓
# рдХрд┐рдВрд╡рд╛
cd ..; .\stop-all.ps1  # рд╕рд░реНрд╡ рдореЙрдбреНрдпреВрд▓реНрд╕
```

## Using the Application

рдЕтАНреЕрдкреНрд▓рд┐рдХреЗрд╢рди рджрд╕реНрддрдРрд╡рдЬ рдЕрдкрд▓реЛрдб рдЖрдгрд┐ рдкреНрд░рд╢реНрди рд╡рд┐рдЪрд╛рд░рдгреНрдпрд╛рд╕рд╛рдареА рд╡реЗрдм рдЗрдВрдЯрд░рдлреЗрд╕ рдкреНрд░рджрд╛рди рдХрд░рддреЗ.

<a href="images/rag-homepage.png"><img src="../../../translated_images/rag-homepage.d90eb5ce1b3caa94987b4fa2923d3cb884a67987cf2f994ca53756c6586a93b1.mr.png" alt="RAG Application Interface" width="800" style="border: 1px solid #ddd; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"/></a>

*RAG рдЕтАНреЕрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдВрдЯрд░рдлреЗрд╕ - рджрд╕реНрддрдРрд╡рдЬ рдЕрдкрд▓реЛрдб рдХрд░рд╛ рдЖрдгрд┐ рдкреНрд░рд╢реНрди рд╡рд┐рдЪрд╛рд░рд╛*

**Upload a Document**

рджрд╕реНрддрдРрд╡рдЬ рдЕрдкрд▓реЛрдб рдХрд░реВрди рд╕реБрд░реБрд╡рд╛рдд рдХрд░рд╛ - TXT рдлрд╛рдЗрд▓реНрд╕ рдЪрд╛рдЪрдгреАрд╕рд╛рдареА рд╕рд░реНрд╡реЛрддреНрддрдо рдХрд╛рдо рдХрд░рддрд╛рдд. рдпрд╛ рдбрд┐рд░реЗрдХреНрдЯрд░реАрдордзреНрдпреЗ `sample-document.txt` рдЙрдкрд▓рдмреНрдз рдЖрд╣реЗ рдЬреНрдпрд╛рдд LangChain4j рд╡реИрд╢рд┐рд╖реНрдЯреНрдпреЗ, RAG рдЕрдВрдорд▓рдмрдЬрд╛рд╡рдгреА, рдЖрдгрд┐ рд╕рд░реНрд╡реЛрддреНрддрдо рдкрджреНрдзрддреАрдВрдмрджреНрджрд▓ рдорд╛рд╣рд┐рддреА рдЖрд╣реЗ - рдкреНрд░рдгрд╛рд▓реАрдЪреА рдЪрд╛рдЪрдгреА рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдкрд░рд┐рдкреВрд░реНрдг.

рд╕рд┐рд╕реНрдЯрдо рддреБрдордЪрд╛ рджрд╕реНрддрдРрд╡рдЬ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░рддреЗ, рддреНрдпрд╛рд▓рд╛ рдЪрдВрдХрдордзреНрдпреЗ рд╡рд┐рднрд╛рдЧрддреЗ, рдЖрдгрд┐ рдкреНрд░рддреНрдпреЗрдХ рдЪрдВрдХрд╕рд╛рдареА рдПрдореНрдмреЗрдбрд┐рдВрдЧ рддрдпрд╛рд░ рдХрд░рддреЗ. рд╣реЗ рд╕реНрд╡рдпрдВрдЪрд▓рд┐рддрдкрдгреЗ рдЕрдкрд▓реЛрдб рдХрд░рддрд╛рдирд╛ рд╣реЛрддреЗ.

**Ask Questions**

рдЖрддрд╛ рджрд╕реНрддрдРрд╡рдЬрд╛рдЪреНрдпрд╛ рд╕рд╛рдордЧреНрд░реАрдмрджреНрджрд▓ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░рд╢реНрди рд╡рд┐рдЪрд╛рд░рд╛. рдХрд╛рд╣реА рддрдереНрдпрд╛рддреНрдордХ рдкреНрд░рд╢реНрди рд╡рд┐рдЪрд╛рд░рд╛ рдЬреЗ рджрд╕реНрддрдРрд╡рдЬрд╛рдд рд╕реНрдкрд╖реНрдЯрдкрдгреЗ рдирдореВрдж рдЖрд╣реЗрдд. рд╕рд┐рд╕реНрдЯрдо рд╕рдВрдмрдВрдзрд┐рдд рдЪрдВрдХ рд╢реЛрдзрддреЗ, рддреНрдпрд╛рдВрдирд╛ рдкреНрд░реЙрдореНрдкреНрдЯрдордзреНрдпреЗ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░рддреЗ, рдЖрдгрд┐ рдЙрддреНрддрд░ рддрдпрд╛рд░ рдХрд░рддреЗ.

**Check Source References**

рдкреНрд░рддреНрдпреЗрдХ рдЙрддреНрддрд░рд╛рдд рд╕реНрд░реЛрдд рд╕рдВрджрд░реНрдн рдЖрдгрд┐ рд╕рдорд╛рдирддрд╛ рдЧреБрдгрдзрд░реНрдо рдЕрд╕рддрд╛рдд. рд╣реЗ рдЧреБрдгрдзрд░реНрдо (0 рддреЗ 1 рдкрд░реНрдпрдВрдд) рджрд░реНрд╢рд╡рддрд╛рдд рдХреА рдкреНрд░рддреНрдпреЗрдХ рдЪрдВрдХ рддреБрдордЪреНрдпрд╛ рдкреНрд░рд╢реНрдирд╛рд╢реА рдХрд┐рддрдкрдд рд╕рдВрдмрдВрдзрд┐рдд рд╣реЛрддрд╛. рдЬрд╛рд╕реНрдд рдЧреБрдгрдзрд░реНрдо рдореНрд╣рдгрдЬреЗ рдЪрд╛рдВрдЧрд▓реЗ рдЬреБрд│рдгрд╛рд░реЗ. рдпрд╛рдореБрд│реЗ рддреБрдореНрд╣реА рдЙрддреНрддрд░ рд╕реНрд░реЛрдд рд╕рд╛рдордЧреНрд░реАрд╢реА рддрдкрд╛рд╕реВ рд╢рдХрддрд╛.

<a href="images/rag-query-results.png"><img src="../../../translated_images/rag-query-results.6d69fcec5397f3558c788388bb395191616dad4c7c0417f1a68bd18590ad0a0e.mr.png" alt="RAG Query Results" width="800" style="border: 1px solid #ddd; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"/></a>

*рдкреНрд░рд╢реНрдирд╛рдВрдЪреЗ рдирд┐рдХрд╛рд▓ рдЬреЗ рдЙрддреНрддрд░ рд╕реНрд░реЛрдд рд╕рдВрджрд░реНрдн рдЖрдгрд┐ рд╕рдВрдмрдВрдзрд┐рдд рдЧреБрдгрд╛рдВрд╕рд╣ рджрд╛рдЦрд╡рддрд╛рдд*

**Experiment with Questions**

рд╡реЗрдЧрд╡реЗрдЧрд│реНрдпрд╛ рдкреНрд░рдХрд╛рд░рдЪреЗ рдкреНрд░рд╢реНрди рд╡рд┐рдЪрд╛рд░реВрди рдкрд╣рд╛:
- рд╡рд┐рд╢рд┐рд╖реНрдЯ рддрдереНрдпреЗ: "рдореБрдЦреНрдп рд╡рд┐рд╖рдп рдХрд╛рдп рдЖрд╣реЗ?"
- рддреБрд▓рдирд╛: "X рдЖрдгрд┐ Y рдордзреНрдпреЗ рдХрд╛рдп рдлрд░рдХ рдЖрд╣реЗ?"
- рд╕рд╛рд░рд╛рдВрд╢: "Z рдмрджреНрджрд▓ рдореБрдЦреНрдп рдореБрджреНрджреЗ рд╕рд╛рд░рд╛рдВрд╢рд┐рдд рдХрд░рд╛"

рддреБрдордЪреНрдпрд╛ рдкреНрд░рд╢реНрдирд╛рдЪреНрдпрд╛ рджрд╕реНрддрдРрд╡рдЬ рд╕рд╛рдордЧреНрд░реАрд╢реА рдЬреБрд│рдгреАрд╡рд░ рдЖрдзрд╛рд░рд┐рдд рд╕рдВрдмрдВрдзрд┐рдд рдЧреБрдгрдзрд░реНрдо рдХрд╕реЗ рдмрджрд▓рддрд╛рдд рддреЗ рдкрд╛рд╣рд╛.

## Key Concepts

**Chunking Strategy**

рджрд╕реНрддрдРрд╡рдЬ 300-рдЯреЛрдХрди рдЪрдВрдХрдордзреНрдпреЗ рд╡рд┐рднрд╛рдЧрд▓реЗ рдЬрд╛рддрд╛рдд рдЬреНрдпрд╛рдд 30 рдЯреЛрдХрди рдУрд╡реНрд╣рд░рд▓реЕрдк рдЕрд╕рддреЛ. рд╣рд╛ рд╕рдорддреЛрд▓ рдкреНрд░рддреНрдпреЗрдХ рдЪрдВрдХрд▓рд╛ рдЕрд░реНрдердкреВрд░реНрдг рд╕рдВрджрд░реНрдн рджреЗрддреЛ рдЖрдгрд┐ рдПрдХрд╛рдЪ рд╡реЗрд│реА рдЕрдиреЗрдХ рдЪрдВрдХ рдкреНрд░реЙрдореНрдкреНрдЯрдордзреНрдпреЗ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░рдгреНрдпрд╛рд╕ рд▓рд╣рд╛рди рдареЗрд╡рддреЛ.

**Similarity Scores**

рдЧреБрдгрдзрд░реНрдо 0 рддреЗ 1 рдкрд░реНрдпрдВрдд рдЕрд╕рддрд╛рдд:
- 0.7-1.0: рдЕрддреНрдпрдВрдд рд╕рдВрдмрдВрдзрд┐рдд, рдЕрдЪреВрдХ рдЬреБрд│рдгреА
- 0.5-0.7: рд╕рдВрдмрдВрдзрд┐рдд, рдЪрд╛рдВрдЧрд▓рд╛ рд╕рдВрджрд░реНрдн
- 0.5 рдЦрд╛рд▓реА: рдлрд┐рд▓реНрдЯрд░ рдХреЗрд▓реЗрд▓реЗ, рдЦреВрдк рд╡реЗрдЧрд│реЗ

рд╕рд┐рд╕реНрдЯрдо рдХреЗрд╡рд│ рдХрд┐рдорд╛рди рдереНрд░реЗрд╢реЛрд▓реНрдб рдкреЗрдХреНрд╖рд╛ рд╡рд░рдЪреЗ рдЪрдВрдХ рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рдЬреЗрдгреЗрдХрд░реВрди рдЧреБрдгрд╡рддреНрддрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реЛрдИрд▓.

**In-Memory Storage**

рд╣рд╛ рдореЙрдбреНрдпреВрд▓ рд╕реЛрдкреНрдпрд╛ рд╕рд╛рдареА рдЗрди-рдореЗрдорд░реА рд╕реНрдЯреЛрд░реЗрдЬ рд╡рд╛рдкрд░рддреЛ. рдЬреЗрд╡реНрд╣рд╛ рддреБрдореНрд╣реА рдЕтАНреЕрдкреНрд▓рд┐рдХреЗрд╢рди рдкреБрдиреНрд╣рд╛ рд╕реБрд░реВ рдХрд░рддрд╛, рддреЗрд╡реНрд╣рд╛ рдЕрдкрд▓реЛрдб рдХреЗрд▓реЗрд▓реЗ рджрд╕реНрддрдРрд╡рдЬ рдЧрд╣рд╛рд│ рд╣реЛрддрд╛рдд. рдЙрддреНрдкрд╛рджрди рдкреНрд░рдгрд╛рд▓реА Qdrant рдХрд┐рдВрд╡рд╛ Azure AI Search рд╕рд╛рд░рдЦреНрдпрд╛ рдХрд╛рдпрдорд╕реНрд╡рд░реВрдкреА рд╡реНрд╣реЗрдХреНрдЯрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рд╡рд╛рдкрд░рддрд╛рдд.

**Context Window Management**

рдкреНрд░рддреНрдпреЗрдХ рдореЙрдбреЗрд▓рдЪреА рдХрдорд╛рд▓ рд╕рдВрджрд░реНрдн рд╡рд┐рдВрдбреЛ рдЕрд╕рддреЗ. рддреБрдореНрд╣реА рдореЛрдареНрдпрд╛ рджрд╕реНрддрдРрд╡рдЬрд╛рддреАрд▓ рдкреНрд░рддреНрдпреЗрдХ рдЪрдВрдХ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░реВ рд╢рдХрдд рдирд╛рд╣реА. рд╕рд┐рд╕реНрдЯрдо рдЯреЙрдк N рд╕рд░реНрд╡рд╛рдд рд╕рдВрдмрдВрдзрд┐рдд рдЪрдВрдХ (рдбрд┐рдлреЙрд▓реНрдЯ 5) рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рдЬреЗрдгреЗрдХрд░реВрди рдорд░реНрдпрд╛рджрд╛рдВрдордзреНрдпреЗ рд░рд╛рд╣реВрди рдЕрдЪреВрдХ рдЙрддреНрддрд░рд╛рдВрд╕рд╛рдареА рдкреБрд░реЗрд╕рд╛ рд╕рдВрджрд░реНрдн рдорд┐рд│реЗрд▓.

## When RAG Matters

**RAG рд╡рд╛рдкрд░рд╛ рдЬреЗрд╡реНрд╣рд╛:**
- рдорд╛рд▓рдХреАрдЪреНрдпрд╛ рджрд╕реНрддрдРрд╡рдЬрд╛рдВрдмрджреНрджрд▓ рдкреНрд░рд╢реНрдирд╛рдВрдЪреА рдЙрддреНрддрд░реЗ рджреНрдпрд╛рдпрдЪреА рдЕрд╕рддреАрд▓
- рдорд╛рд╣рд┐рддреА рд╡рд╛рд░рдВрд╡рд╛рд░ рдмрджрд▓рддреЗ (рдзреЛрд░рдгреЗ, рдХрд┐рдВрдорддреА, рддрдкрд╢реАрд▓)
- рдЕрдЪреВрдХрддреЗрд╕рд╛рдареА рд╕реНрд░реЛрдд рд╕рдВрджрд░реНрдн рдЖрд╡рд╢реНрдпрдХ рдЕрд╕рддреЛ
- рд╕рд╛рдордЧреНрд░реА рдПрдХрд╛рдЪ рдкреНрд░реЙрдореНрдкреНрдЯрдордзреНрдпреЗ рдмрд╕рдгреНрдпрд╛рдЗрддрдХреА рд▓рд╣рд╛рди рдирд╛рд╣реА
- рддреБрдореНрд╣рд╛рд▓рд╛ рдкрдбрддрд╛рд│рдгреА рдХрд░рддрд╛ рдпреЗрдгрд╛рд░реА, рдЖрдзрд╛рд░рднреВрдд рдЙрддреНрддрд░реЗ рд╣рд╡реА рдЕрд╕рддреАрд▓

**RAG рд╡рд╛рдкрд░реВ рдирдХрд╛ рдЬреЗрд╡реНрд╣рд╛:**
- рдкреНрд░рд╢реНрди рд╕рд╛рдорд╛рдиреНрдп рдЬреНрдЮрд╛рдирд╛рд╡рд░ рдЖрдзрд╛рд░рд┐рдд рдЕрд╕рддреАрд▓ рдЬреЗ рдореЙрдбреЗрд▓рд▓рд╛ рдЖрдзреАрдЪ рдорд╛рд╣рд┐рдд рдЖрд╣реЗ
- рд░рд┐рдЕрд▓-рдЯрд╛рдЗрдо рдбреЗрдЯрд╛ рдЖрд╡рд╢реНрдпрдХ рдЕрд╕реЗрд▓ (RAG рдЕрдкрд▓реЛрдб рдХреЗрд▓реЗрд▓реНрдпрд╛ рджрд╕реНрддрдРрд╡рдЬрд╛рдВрд╡рд░ рдХрд╛рдо рдХрд░рддреЗ)
- рд╕рд╛рдордЧреНрд░реА рдЗрддрдХреА рд▓рд╣рд╛рди рдЕрд╕реЗрд▓ рдХреА рдереЗрдЯ рдкреНрд░реЙрдореНрдкреНрдЯрдордзреНрдпреЗ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░рддрд╛ рдпреЗрдИрд▓

## Next Steps

**Next Module:** [04-tools - AI Agents with Tools](../04-tools/README.md)

---

**Navigation:** [тЖР Previous: Module 02 - Prompt Engineering](../02-prompt-engineering/README.md) | [Back to Main](../README.md) | [Next: Module 04 - Tools тЖТ](../04-tools/README.md)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**рдЕрд╕реНрд╡реАрдХрд░рдг**:
рд╣рд╛ рджрд╕реНрддрдРрд╡рдЬ AI рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рд╡рд╛рдкрд░реВрди рдЕрдиреБрд╡рд╛рджрд┐рдд рдХреЗрд▓рд╛ рдЖрд╣реЗ. рдЖрдореНрд╣реА рдЕрдЪреВрдХрддреЗрд╕рд╛рдареА рдкреНрд░рдпрддреНрдирд╢реАрд▓ рдЕрд╕рд▓реЛ рддрд░реА, рдХреГрдкрдпрд╛ рд▓рдХреНрд╖рд╛рдд рдШреНрдпрд╛ рдХреА рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд рдЕрдиреБрд╡рд╛рджрд╛рдВрдордзреНрдпреЗ рдЪреБрдХрд╛ рдХрд┐рдВрд╡рд╛ рдЕрдЪреВрдХрддреЗрдЪреА рдХрдорддрд░рддрд╛ рдЕрд╕реВ рд╢рдХрддреЗ. рдореВрд│ рджрд╕реНрддрдРрд╡рдЬ рддреНрдпрд╛рдЪреНрдпрд╛ рд╕реНрдерд╛рдирд┐рдХ рднрд╛рд╖реЗрдд рдЕрдзрд┐рдХреГрдд рд╕реНрд░реЛрдд рдорд╛рдирд▓рд╛ рдЬрд╛рд╡рд╛. рдорд╣рддреНрддреНрд╡рд╛рдЪреНрдпрд╛ рдорд╛рд╣рд┐рддреАрд╕рд╛рдареА рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡реА рдЕрдиреБрд╡рд╛рдж рд╢рд┐рдлрд╛рд░рд╕реАрдп рдЖрд╣реЗ. рдпрд╛ рдЕрдиреБрд╡рд╛рджрд╛рдЪреНрдпрд╛ рд╡рд╛рдкрд░рд╛рдореБрд│реЗ рдЙрджреНрднрд╡рд▓реЗрд▓реНрдпрд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА рдЧреИрд░рд╕рдордЬреБрддреА рдХрд┐рдВрд╡рд╛ рдЪреБрдХреАрдЪреНрдпрд╛ рдЕрд░реНрдерд▓рд╛рдЧреА рдЖрдореНрд╣реА рдЬрдмрд╛рдмрджрд╛рд░ рдирд╛рд╣реА.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->