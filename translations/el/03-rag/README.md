<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "f538a51cfd13147d40d84e936a0f485c",
  "translation_date": "2025-12-13T17:03:04+00:00",
  "source_file": "03-rag/README.md",
  "language_code": "el"
}
-->
# Module 03: RAG (Ανάκτηση-Ενισχυμένη Γεννήτρια)

## Περιεχόμενα

- [Τι θα μάθετε](../../../03-rag)
- [Προαπαιτούμενα](../../../03-rag)
- [Κατανόηση του RAG](../../../03-rag)
- [Πώς λειτουργεί](../../../03-rag)
  - [Επεξεργασία Εγγράφων](../../../03-rag)
  - [Δημιουργία Ενσωματώσεων](../../../03-rag)
  - [Σημασιολογική Αναζήτηση](../../../03-rag)
  - [Δημιουργία Απαντήσεων](../../../03-rag)
- [Εκτέλεση της Εφαρμογής](../../../03-rag)
- [Χρήση της Εφαρμογής](../../../03-rag)
  - [Ανέβασμα Εγγράφου](../../../03-rag)
  - [Κάντε Ερωτήσεις](../../../03-rag)
  - [Έλεγχος Αναφορών Πηγών](../../../03-rag)
  - [Πειραματιστείτε με Ερωτήσεις](../../../03-rag)
- [Κύριες Έννοιες](../../../03-rag)
  - [Στρατηγική Τμηματοποίησης](../../../03-rag)
  - [Βαθμολογίες Ομοιότητας](../../../03-rag)
  - [Αποθήκευση στη Μνήμη](../../../03-rag)
  - [Διαχείριση Παραθύρου Πλαισίου](../../../03-rag)
- [Πότε έχει σημασία το RAG](../../../03-rag)
- [Επόμενα Βήματα](../../../03-rag)

## Τι θα μάθετε

Στα προηγούμενα modules, μάθατε πώς να έχετε συνομιλίες με AI και να δομείτε αποτελεσματικά τα prompts σας. Αλλά υπάρχει ένας θεμελιώδης περιορισμός: τα γλωσσικά μοντέλα γνωρίζουν μόνο ό,τι έμαθαν κατά την εκπαίδευση. Δεν μπορούν να απαντήσουν σε ερωτήσεις σχετικά με τις πολιτικές της εταιρείας σας, την τεκμηρίωση του έργου σας ή οποιαδήποτε πληροφορία δεν εκπαιδεύτηκαν να γνωρίζουν.

Το RAG (Ανάκτηση-Ενισχυμένη Γεννήτρια) λύνει αυτό το πρόβλημα. Αντί να προσπαθείτε να διδάξετε στο μοντέλο τις πληροφορίες σας (που είναι ακριβό και μη πρακτικό), του δίνετε τη δυνατότητα να αναζητά μέσα στα έγγραφά σας. Όταν κάποιος κάνει μια ερώτηση, το σύστημα βρίσκει σχετικές πληροφορίες και τις συμπεριλαμβάνει στο prompt. Το μοντέλο απαντά βάσει αυτού του ανακτημένου πλαισίου.

Σκεφτείτε το RAG σαν να δίνετε στο μοντέλο μια βιβλιοθήκη αναφορών. Όταν κάνετε μια ερώτηση, το σύστημα:

1. **Ερώτηση Χρήστη** - Κάνετε μια ερώτηση  
2. **Ενσωμάτωση** - Μετατρέπει την ερώτησή σας σε διάνυσμα  
3. **Αναζήτηση Διανυσμάτων** - Βρίσκει παρόμοια τμήματα εγγράφων  
4. **Σύνθεση Πλαισίου** - Προσθέτει σχετικά τμήματα στο prompt  
5. **Απάντηση** - Το LLM δημιουργεί απάντηση βάσει του πλαισίου  

Αυτό θεμελιώνει τις απαντήσεις του μοντέλου στα πραγματικά σας δεδομένα αντί να βασίζεται στη γνώση εκπαίδευσης ή να επινοεί απαντήσεις.

<img src="../../../translated_images/rag-architecture.ccb53b71a6ce407f.el.png" alt="Αρχιτεκτονική RAG" width="800"/>

*Ροή εργασίας RAG - από την ερώτηση χρήστη στη σημασιολογική αναζήτηση και στη δημιουργία απάντησης με πλαίσιο*

## Προαπαιτούμενα

- Ολοκληρωμένο Module 01 (αναπτύχθηκαν πόροι Azure OpenAI)  
- Αρχείο `.env` στον ριζικό φάκελο με διαπιστευτήρια Azure (δημιουργήθηκε από `azd up` στο Module 01)  

> **Σημείωση:** Αν δεν έχετε ολοκληρώσει το Module 01, ακολουθήστε πρώτα τις οδηγίες ανάπτυξης εκεί.

## Πώς λειτουργεί

**Επεξεργασία Εγγράφων** - [DocumentService.java](../../../03-rag/src/main/java/com/example/langchain4j/rag/service/DocumentService.java)

Όταν ανεβάζετε ένα έγγραφο, το σύστημα το χωρίζει σε τμήματα - μικρότερα κομμάτια που χωράνε άνετα στο παράθυρο πλαισίου του μοντέλου. Αυτά τα τμήματα επικαλύπτονται ελαφρώς ώστε να μην χάνεται το πλαίσιο στα όρια.

```java
Document document = FileSystemDocumentLoader.loadDocument("sample-document.txt");

DocumentSplitter splitter = DocumentSplitters
    .recursive(300, 30, new OpenAiTokenizer());

List<TextSegment> segments = splitter.split(document);
```
  
> **🤖 Δοκιμάστε με [GitHub Copilot](https://github.com/features/copilot) Chat:** Ανοίξτε το [`DocumentService.java`](../../../03-rag/src/main/java/com/example/langchain4j/rag/service/DocumentService.java) και ρωτήστε:  
> - "Πώς χωρίζει το LangChain4j τα έγγραφα σε τμήματα και γιατί είναι σημαντική η επικάλυψη;"  
> - "Ποιο είναι το βέλτιστο μέγεθος τμήματος για διαφορετικούς τύπους εγγράφων και γιατί;"  
> - "Πώς χειρίζομαι έγγραφα σε πολλές γλώσσες ή με ειδική μορφοποίηση;"

**Δημιουργία Ενσωματώσεων** - [LangChainRagConfig.java](../../../03-rag/src/main/java/com/example/langchain4j/rag/config/LangChainRagConfig.java)

Κάθε τμήμα μετατρέπεται σε αριθμητική αναπαράσταση που ονομάζεται ενσωμάτωση - ουσιαστικά ένα μαθηματικό αποτύπωμα που αποτυπώνει το νόημα του κειμένου. Παρόμοια κείμενα παράγουν παρόμοιες ενσωματώσεις.

```java
@Bean
public EmbeddingModel embeddingModel() {
    return OpenAiOfficialEmbeddingModel.builder()
        .baseUrl(azureOpenAiEndpoint)
        .apiKey(azureOpenAiKey)
        .modelName(azureEmbeddingDeploymentName)
        .build();
}

EmbeddingStore<TextSegment> embeddingStore = 
    new InMemoryEmbeddingStore<>();
```
  
<img src="../../../translated_images/vector-embeddings.2ef7bdddac79a327.el.png" alt="Χώρος Ενσωματώσεων Διανυσμάτων" width="800"/>

*Έγγραφα αναπαριστώνται ως διανύσματα στον χώρο ενσωματώσεων - παρόμοιο περιεχόμενο ομαδοποιείται*

**Σημασιολογική Αναζήτηση** - [RagService.java](../../../03-rag/src/main/java/com/example/langchain4j/rag/service/RagService.java)

Όταν κάνετε μια ερώτηση, η ερώτησή σας επίσης μετατρέπεται σε ενσωμάτωση. Το σύστημα συγκρίνει την ενσωμάτωση της ερώτησής σας με όλες τις ενσωματώσεις των τμημάτων εγγράφων. Βρίσκει τα τμήματα με τις πιο παρόμοιες έννοιες - όχι μόνο με βάση λέξεις-κλειδιά, αλλά πραγματική σημασιολογική ομοιότητα.

```java
Embedding queryEmbedding = embeddingModel.embed(question).content();

List<EmbeddingMatch<TextSegment>> matches = 
    embeddingStore.findRelevant(queryEmbedding, 5, 0.7);

for (EmbeddingMatch<TextSegment> match : matches) {
    String relevantText = match.embedded().text();
    double score = match.score();
}
```
  
> **🤖 Δοκιμάστε με [GitHub Copilot](https://github.com/features/copilot) Chat:** Ανοίξτε το [`RagService.java`](../../../03-rag/src/main/java/com/example/langchain4j/rag/service/RagService.java) και ρωτήστε:  
> - "Πώς λειτουργεί η αναζήτηση ομοιότητας με ενσωματώσεις και τι καθορίζει τη βαθμολογία;"  
> - "Ποιο όριο ομοιότητας πρέπει να χρησιμοποιήσω και πώς επηρεάζει τα αποτελέσματα;"  
> - "Πώς χειρίζομαι περιπτώσεις όπου δεν βρέθηκαν σχετικά έγγραφα;"

**Δημιουργία Απαντήσεων** - [RagService.java](../../../03-rag/src/main/java/com/example/langchain4j/rag/service/RagService.java)

Τα πιο σχετικά τμήματα περιλαμβάνονται στο prompt προς το μοντέλο. Το μοντέλο διαβάζει αυτά τα συγκεκριμένα τμήματα και απαντά στην ερώτησή σας βάσει αυτών των πληροφοριών. Αυτό αποτρέπει την παραισθησιογένεση - το μοντέλο μπορεί να απαντήσει μόνο από ό,τι έχει μπροστά του.

## Εκτέλεση της Εφαρμογής

**Επαλήθευση ανάπτυξης:**

Βεβαιωθείτε ότι το αρχείο `.env` υπάρχει στον ριζικό φάκελο με διαπιστευτήρια Azure (δημιουργήθηκε κατά το Module 01):  
```bash
cat ../.env  # Πρέπει να εμφανίζει το AZURE_OPENAI_ENDPOINT, API_KEY, DEPLOYMENT
```
  
**Εκκίνηση της εφαρμογής:**

> **Σημείωση:** Αν έχετε ήδη ξεκινήσει όλες τις εφαρμογές με `./start-all.sh` από το Module 01, αυτό το module τρέχει ήδη στην πόρτα 8081. Μπορείτε να παραλείψετε τις εντολές εκκίνησης παρακάτω και να μεταβείτε απευθείας στο http://localhost:8081.

**Επιλογή 1: Χρήση Spring Boot Dashboard (Συνιστάται για χρήστες VS Code)**

Το dev container περιλαμβάνει την επέκταση Spring Boot Dashboard, που παρέχει οπτικό περιβάλλον για τη διαχείριση όλων των εφαρμογών Spring Boot. Την βρίσκετε στη γραμμή δραστηριοτήτων αριστερά στο VS Code (αναζητήστε το εικονίδιο Spring Boot).

Από το Spring Boot Dashboard μπορείτε:  
- Να δείτε όλες τις διαθέσιμες εφαρμογές Spring Boot στο workspace  
- Να ξεκινήσετε/σταματήσετε εφαρμογές με ένα κλικ  
- Να δείτε logs εφαρμογών σε πραγματικό χρόνο  
- Να παρακολουθείτε την κατάσταση των εφαρμογών  

Απλά κάντε κλικ στο κουμπί αναπαραγωγής δίπλα στο "rag" για να ξεκινήσετε αυτό το module, ή ξεκινήστε όλα τα modules μαζί.

<img src="../../../translated_images/dashboard.fbe6e28bf4267ffe.el.png" alt="Πίνακας Ελέγχου Spring Boot" width="400"/>

**Επιλογή 2: Χρήση shell scripts**

Ξεκινήστε όλες τις web εφαρμογές (modules 01-04):

**Bash:**  
```bash
cd ..  # Από τον ριζικό κατάλογο
./start-all.sh
```
  
**PowerShell:**  
```powershell
cd ..  # Από τον ριζικό κατάλογο
.\start-all.ps1
```
  
Ή ξεκινήστε μόνο αυτό το module:

**Bash:**  
```bash
cd 03-rag
./start.sh
```
  
**PowerShell:**  
```powershell
cd 03-rag
.\start.ps1
```
  
Και τα δύο scripts φορτώνουν αυτόματα τις μεταβλητές περιβάλλοντος από το αρχείο `.env` στον ριζικό φάκελο και θα δημιουργήσουν τα JARs αν δεν υπάρχουν.

> **Σημείωση:** Αν προτιμάτε να χτίσετε όλα τα modules χειροκίνητα πριν την εκκίνηση:  
>  
> **Bash:**  
> ```bash
> cd ..  # Go to root directory
> mvn clean package -DskipTests
> ```
>  
> **PowerShell:**  
> ```powershell
> cd ..  # Go to root directory
> mvn clean package -DskipTests
> ```
  
Ανοίξτε το http://localhost:8081 στον περιηγητή σας.

**Για να σταματήσετε:**

**Bash:**  
```bash
./stop.sh  # Μόνο αυτό το module
# Ή
cd .. && ./stop-all.sh  # Όλα τα modules
```
  
**PowerShell:**  
```powershell
.\stop.ps1  # Μόνο αυτό το module
# Ή
cd ..; .\stop-all.ps1  # Όλα τα modules
```
  
## Χρήση της Εφαρμογής

Η εφαρμογή παρέχει web περιβάλλον για ανέβασμα εγγράφων και ερωτήσεις.

<a href="images/rag-homepage.png"><img src="../../../translated_images/rag-homepage.d90eb5ce1b3caa94.el.png" alt="Διεπαφή Εφαρμογής RAG" width="800" style="border: 1px solid #ddd; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"/></a>

*Η διεπαφή της εφαρμογής RAG - ανεβάστε έγγραφα και κάντε ερωτήσεις*

**Ανέβασμα Εγγράφου**

Ξεκινήστε ανεβάζοντας ένα έγγραφο - τα αρχεία TXT λειτουργούν καλύτερα για δοκιμές. Στον φάκελο υπάρχει ένα `sample-document.txt` που περιέχει πληροφορίες για τα χαρακτηριστικά του LangChain4j, την υλοποίηση RAG και βέλτιστες πρακτικές - ιδανικό για δοκιμές.

Το σύστημα επεξεργάζεται το έγγραφό σας, το χωρίζει σε τμήματα και δημιουργεί ενσωματώσεις για κάθε τμήμα. Αυτό γίνεται αυτόματα κατά το ανέβασμα.

**Κάντε Ερωτήσεις**

Τώρα κάντε συγκεκριμένες ερωτήσεις σχετικά με το περιεχόμενο του εγγράφου. Δοκιμάστε κάτι πραγματικό που αναφέρεται σαφώς στο έγγραφο. Το σύστημα αναζητά σχετικά τμήματα, τα συμπεριλαμβάνει στο prompt και δημιουργεί απάντηση.

**Έλεγχος Αναφορών Πηγών**

Παρατηρήστε ότι κάθε απάντηση περιλαμβάνει αναφορές πηγών με βαθμολογίες ομοιότητας. Αυτές οι βαθμολογίες (0 έως 1) δείχνουν πόσο σχετικό ήταν κάθε τμήμα με την ερώτησή σας. Υψηλότερες βαθμολογίες σημαίνουν καλύτερες αντιστοιχίες. Αυτό σας επιτρέπει να επαληθεύσετε την απάντηση με το αρχικό υλικό.

<a href="images/rag-query-results.png"><img src="../../../translated_images/rag-query-results.6d69fcec5397f355.el.png" alt="Αποτελέσματα Ερωτήματος RAG" width="800" style="border: 1px solid #ddd; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"/></a>

*Αποτελέσματα ερωτήματος που δείχνουν απάντηση με αναφορές πηγών και βαθμολογίες σχετικότητας*

**Πειραματιστείτε με Ερωτήσεις**

Δοκιμάστε διαφορετικούς τύπους ερωτήσεων:  
- Συγκεκριμένα γεγονότα: "Ποιο είναι το κύριο θέμα;"  
- Συγκρίσεις: "Ποια είναι η διαφορά μεταξύ X και Y;"  
- Περίληψη: "Περίληψη των βασικών σημείων για το Z"  

Παρακολουθήστε πώς αλλάζουν οι βαθμολογίες σχετικότητας ανάλογα με το πόσο καλά ταιριάζει η ερώτησή σας με το περιεχόμενο του εγγράφου.

## Κύριες Έννοιες

**Στρατηγική Τμηματοποίησης**

Τα έγγραφα χωρίζονται σε τμήματα των 300 tokens με επικάλυψη 30 tokens. Αυτή η ισορροπία εξασφαλίζει ότι κάθε τμήμα έχει αρκετό πλαίσιο για να είναι ουσιαστικό, ενώ παραμένει αρκετά μικρό για να συμπεριληφθούν πολλά τμήματα σε ένα prompt.

**Βαθμολογίες Ομοιότητας**

Οι βαθμολογίες κυμαίνονται από 0 έως 1:  
- 0.7-1.0: Πολύ σχετικό, ακριβής αντιστοιχία  
- 0.5-0.7: Σχετικό, καλό πλαίσιο  
- Κάτω από 0.5: Φιλτράρεται, πολύ διαφορετικό  

Το σύστημα ανακτά μόνο τμήματα πάνω από το ελάχιστο όριο για να εξασφαλίσει ποιότητα.

**Αποθήκευση στη Μνήμη**

Αυτό το module χρησιμοποιεί αποθήκευση στη μνήμη για απλότητα. Όταν επανεκκινείτε την εφαρμογή, τα ανεβασμένα έγγραφα χάνονται. Τα συστήματα παραγωγής χρησιμοποιούν επίμονες βάσεις δεδομένων διανυσμάτων όπως Qdrant ή Azure AI Search.

**Διαχείριση Παραθύρου Πλαισίου**

Κάθε μοντέλο έχει μέγιστο παράθυρο πλαισίου. Δεν μπορείτε να συμπεριλάβετε κάθε τμήμα από ένα μεγάλο έγγραφο. Το σύστημα ανακτά τα κορυφαία N πιο σχετικά τμήματα (προεπιλογή 5) για να παραμείνει εντός ορίων ενώ παρέχει αρκετό πλαίσιο για ακριβείς απαντήσεις.

## Πότε έχει σημασία το RAG

**Χρησιμοποιήστε το RAG όταν:**  
- Απαντάτε σε ερωτήσεις για ιδιόκτητα έγγραφα  
- Οι πληροφορίες αλλάζουν συχνά (πολιτικές, τιμές, προδιαγραφές)  
- Απαιτείται ακρίβεια με αναφορά πηγής  
- Το περιεχόμενο είναι πολύ μεγάλο για να χωρέσει σε ένα prompt  
- Χρειάζεστε επαληθεύσιμες, θεμελιωμένες απαντήσεις  

**Μην χρησιμοποιείτε το RAG όταν:**  
- Οι ερωτήσεις απαιτούν γενικές γνώσεις που ήδη έχει το μοντέλο  
- Χρειάζεστε δεδομένα σε πραγματικό χρόνο (το RAG δουλεύει με ανεβασμένα έγγραφα)  
- Το περιεχόμενο είναι αρκετά μικρό για να συμπεριληφθεί απευθείας στα prompts  

## Επόμενα Βήματα

**Επόμενο Module:** [04-tools - AI Agents with Tools](../04-tools/README.md)

---

**Πλοήγηση:** [← Προηγούμενο: Module 02 - Μηχανική Προτροπών](../02-prompt-engineering/README.md) | [Πίσω στην Αρχική](../README.md) | [Επόμενο: Module 04 - Εργαλεία →](../04-tools/README.md)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**Αποποίηση ευθυνών**:  
Αυτό το έγγραφο έχει μεταφραστεί χρησιμοποιώντας την υπηρεσία αυτόματης μετάφρασης AI [Co-op Translator](https://github.com/Azure/co-op-translator). Παρόλο που επιδιώκουμε την ακρίβεια, παρακαλούμε να λάβετε υπόψη ότι οι αυτόματες μεταφράσεις ενδέχεται να περιέχουν λάθη ή ανακρίβειες. Το πρωτότυπο έγγραφο στη μητρική του γλώσσα πρέπει να θεωρείται η αυθεντική πηγή. Για κρίσιμες πληροφορίες, συνιστάται επαγγελματική ανθρώπινη μετάφραση. Δεν φέρουμε ευθύνη για τυχόν παρεξηγήσεις ή λανθασμένες ερμηνείες που προκύπτουν από τη χρήση αυτής της μετάφρασης.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->